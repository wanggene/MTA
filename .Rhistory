<<<<<<< HEAD
df %>% group_by( Station, fare_type) %>% summarise(Total_swipe = sum(fare_swipe)) %>% group_by(fare_type) %>% summarise(total_swipe = sum(Total_swipe) %>% arrange(desc(Total_swipe)) %>% head()
)
df %>% group_by( Station, fare_type) %>% summarise(Total_swipe = sum(fare_swipe)) %>% group_by(fare_type) %>% summarise(total_swipe = sum(Total_swipe) %>% arrange(desc(Total_swipe)) %>% head()
)
replace('a_b', '_', ' ')
replace('a_b', '_', ' ')
strsplit('a_b', '_')
nrow(df$fare_type)
count(df$fare_type)
n(df$fare_type)
df$fare_type %>% nrow()
dim(df$fare_type)
df %>% group_by_(station, year, month) %>%
dplyr::summarise(swipe_count = sum(fare_swipe)) %>%
arrange(swipe_count) %>% head()
df %>% group_by_(station, year, month) %>%
dplyr::summarise(swipe_count = sum(fare_swipe)) %>%
arrange(swipe_count) %>% head()
df %>% group_by( year, month, Station) %>% summarise(Total_swipe = sum(fare_swipe)) %>% arrange(desc(Total_swipe)) %>% head()
df %>% group_by( year, month, Station) %>%
summarise(Total_swipe = sum(fare_swipe)) %>%
arrange(desc(Total_swipe)) %>% head(1)
=======
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
View(df)
runApp('~/GitHub/MTA')
df %>% filter(To.Date > '2010-06-10') %>%
filter(fare_type == input$fare_type) %>%
group_by_(input$station) %>%
dplyr::summarise(totalfullfare_ym = sum(fare_swipe))
df %>% filter(To.Date > '2010-06-10') %>%
filter(fare_type == 'Full.Fare') %>%
group_by(Station) %>%
dplyr::summarise(totalfullfare_ym = sum(fare_swipe))
df %>% filter(To.Date > '2010-06-10') %>%
filter(fare_type == 'Full.Fare') %>%
group_by(To.Date, Station) %>%
dplyr::summarise(totalfullfare_ym = sum(fare_swipe))
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
setwd("~/GitHub/MTA")
runApp()
runApp()
df %>% filter(To.Date > '2010-06-10') %>%
filter(fare_type == 'Full.Fare') %>%
group_by(To.Date) %>%
dplyr::summarise(totalfullfare_ym = sum(fare_swipe))
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
>>>>>>> 2122f966fcc5021eb26d941fe558730dc766261d
runApp()
runApp()
cat('a', 'b')
runApp()
runApp()
'a' + 'b'
cat('a', 'b')
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
a = 'stsf.stssfs.ttewe'
sub('.', ' ', a)
sub(' ', '.', a)
sub(' ', '__', a)
sub('x', '__', a)
substr('.', '__', a)
strsplit(a, split = '.')
split(a, '.')
str.split(a, '.')
strsplit(a, '.')
strsplit(a, split = '.', fixed = T)
paste0(strsplit(a, split = '.', fixed = T), collapse = ' ' )
paste(strsplit(a, split = '.', fixed = T), collapse = ' ' )
paste(strsplit(a, split = '.', fixed = T), collapse = '' )
names = 'John Andrew Thomas'
paste0(strsplit(names, split=' ')[[1]], sep = '@gmail.com', collapse = '; ')
names = 'John.Andrew.Thomas'
paste0(strsplit(names, split='.')[[1]], sep = 'x', collapse = ' ')
paste0(strsplit(names, split='.')[[1]], collapse = ' ')
paste0(strsplit(names, split='.')[[1]], sep = ' ')
paste0(strsplit(names, split='.', fixed = F)[[1]], sep = ' ')
paste0(strsplit(names, split='.', fixed = T)[[1]], sep = ' ')
paste0(strsplit(names, split='.', fixed = T)[[1]], sep = ' ', collapse = '')
paste0(strsplit(names, split='.', fixed = T)[[1]], collapse = ' ')
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
library(tidyr)
library(dplyr)
library(ggplot2)
mta_fare = read.csv('mta_fare.csv', stringsAsFactors = F)
setwd("~/Downloads/MoreData")
mta_fare = read.csv('mta_fare.csv', stringsAsFactors = F)
df = mta_fare
dim(df)
sum(df)
summary(df)
names(df[4:])
names(df[,5:])
colnames(df[,5:])
colnames(df)
dim(df[-From.Date])
class(df)
sapply(sum, df)
name_list = colnames(df)
name_list
remove_dot = function(x) {
a = repaste0(strsplit(names, split='.', fixed = T)[[1]], collapse = ' ')
return(a)
}
names = 'John.Andrew.Thomas'
remove_dot(names)
a = paste0(strsplit(names, split='.', fixed = T)[[1]], collapse = ' ')
remove_dot = function(x) {
a = paste0(strsplit(names, split='.', fixed = T)[[1]], collapse = ' ')
return(a)
}
remove_dot(names)
sapply(name_list, remove_dot)
remove_dot = function(x) {
a = paste0(strsplit(x, split='.', fixed = T)[[1]], collapse = ' ')
return(a)
}
sapply(name_list, remove_dot)
remove_dot = function(x) {
Lst = paste(strsplit(x, split='.', fixed = T)[[1]], collapse = ' ')
return (Lst)
}
remove_dot(names)
sapply(name_list, remove_dot)
lapply(name_list, remove_dot)
apply(name_list, 1, remove_dot)
apply(name_list, 2, remove_dot)
apply(name_list, 0, remove_dot)
sapply(name_list, remove_dot)
name_list
name_list[1]
sapply(name_list,1,  remove_dot)
unlist(lapply(name_list,  remove_dot))
unlist(sapply(name_list,  remove_dot))
unlist(lapply(name_list,  remove_dot))
new_name_list = unlist(lapply(name_list,  remove_dot))
remove_dot = function(x) {
Lst = paste(strsplit(x, split='.', fixed = T)[[1]], collapse = '_')
return (Lst)
}
new_name_list = unlist(lapply(name_list,  remove_dot))
new_name_list
Lst = paste0(strsplit(x, split='.', fixed = T)[[1]], collapse = '_')
remove_dot = function(x) {
Lst = paste0(strsplit(x, split='.', fixed = T)[[1]], collapse = '_')
return (Lst)
}
remove_dot(names)
unlist(lapply(name_list,  remove_dot))
remove_dot = function(x) {
Lst = paste0(trim(strsplit(x, split='.', fixed = T)[[1]]), collapse = '_')
return (Lst)
}
unlist(lapply(name_list,  remove_dot))
remove_dot = function(x) {
Lst = paste0(trimws(strsplit(x, split='.', fixed = T)[[1]]), collapse = '_')
return (Lst)
}
unlist(lapply(name_list,  remove_dot))
sort(unlist(lapply(name_list,  remove_dot)))
remove_dot = function(x) {
Lst = paste(strsplit(x, split='.', fixed = T)[[1]], collapse = '_')
return (Lst)
}
unlist(lapply(name_list,  remove_dot))
remove_dot = function(x) {
Lst = paste(strsplit(x, split='.', fixed = T)[[1]], collapse = ' ')
return (Lst)
}
unlist(lapply(name_list,  remove_dot))
unlist(lapply(df1$fare_type,  remove_dot)) %>% head(10)
unlist(lapply(df1$fare_type,  remove_dot)) %>% tail(10)
df_test = df1
df_test$fare_type = unlist(lapply(df_test$fare_type, remove_dot))
head(df_test)
df1$fare_type = unlist(lapply(df1$fare_type, remove_dot))
getwd()
dim(df1)
save(df1, file='mta2010_gathered.Rda')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
g = df %>% group_by(station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
filter(year != 2017 & year != 2010) %>%
ggplot(aes(x=station, y = swipe_count))
g = df %>% group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
filter(year != 2017 & year != 2010) %>%
ggplot(aes(x=Station, y = swipe_count))
g = df %>% group_by(Station) %>%
filter(year != 2017 & year != 2010) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
ggplot(aes(x=Station, y = swipe_count))
g + geom_bar(aes(x=station))
g + geom_bar(aes(x=station, y = swipe_count))
g + geom_bar()
View(df)
g
df %>% group_by(Station) %>%
filter(year != 2017 & year != 2010) %>%
summarise(swipe_count = sum(fare_swipe))
g = df %>%     filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count))
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = ))
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = ), stat='identity')
g = df %>%     filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count))
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
g = df %>%     filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(10)
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
g = df %>%     filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(20)
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% top_n(swipe_count,10)
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count, fill = swipe_count), stat='identity')
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station ,
y = swipe_count, fill = swipe_count), stat='identity', position = stack)
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station ,
y = swipe_count, fill = swipe_count), stat='identity', position = 'stack')
g
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(10) %>% as.factor(Station)
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(10) %>%
g$Station = $as.factor(g$Station)
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(10) %>%
g$Station = as.factor(g$Station)
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(10)
g$Station = as.factor(g$Station)
Stationggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station ,
y = swipe_count, fill = swipe_count), stat='identity')
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(10) %>%
reorder(Station, order(swipe_count, decreasing = TRUE))
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(20)
ggplot(order_by(Station, ~ swipe_count, g), aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(5)
ggplot(order_by(Station, ~ swipe_count, g), aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
ggplot(order_by(Station, swipe_count, g), aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
ggplot(order_by(swipe_count, ~Station, g), aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
ggplot(order_by(swipe_count, ~Station, g), aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
g$Station <- factor(g$Station, levels = g$Station[order(g$swipe_count)])
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(10)
g$Station <- factor(g$Station, levels = g$Station[order(g$swipe_count)])
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
g$Station <- factor(g$Station, levels = g$Station[order(desc(g$swipe_count))])
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity')
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(10)
ggplot(aes(x = swipe_count, y = reorder(Station, swipe_count))) +
geom_bar(stat = 'identity') +
coord_flip()
ggplot(aes(x = swipe_count, y = reorder(Station, order(swipe_count)))) +
geom_bar(stat = 'identity') +
coord_flip()
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity') +
coord_flip()
g$Station = factor(g$Station, levels = g$Station[order(desc(g$swipe_count))])
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity') +
coord_flip()
g$Station = factor(g$Station, levels = g$Station[order(g$swipe_count)])
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity') +
coord_flip()
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(20)
g$Station = factor(g$Station, levels = g$Station[order(g$swipe_count)])
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity') +
coord_flip()
g = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = mean(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(20)
g$Station = factor(g$Station, levels = g$Station[order(g$swipe_count)])
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity') +
coord_flip()
g = df %>%
#filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(20)
g$Station = factor(g$Station, levels = g$Station[order(g$swipe_count)])
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity') +
coord_flip()
g = df %>%
#filter(year != 2017 & year != 2010) %>%
group_by(Station) %>%
summarise(swipe_count = sum(fare_swipe)/1e6) %>%
arrange(desc(swipe_count)) %>% head(20)
g$Station = factor(g$Station, levels = g$Station[order(g$swipe_count)])
ggplot(g, aes(x=Station, y = swipe_count)) +
geom_bar(aes(x=Station , y = swipe_count), stat='identity') +
coord_flip()
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
View(df)
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
df %>%
filter(!year %in% c(2010, 2017)) %>%
group_by_(year) %>%                                     # input$period
dplyr::summarise(swipe_count = sum(fare_swipe)/1e6)
head(df)
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
runApp('~/GitHub/MTA')
df %>%
#filter(year != 2017 & year != 2010) %>%
group_by(fare_type) %>%
summarise(swipe_count = sum(fare_swipe)/1e6) %>%
arrange(desc(swipe_count)) %>% head(20)
class(df)
df$fare_type
df$fare_type = factor(df$fare_type)
str(df)
df %>%
filter(year != 2017 & year != 2010) %>%
group_by(fare_type) %>%
summarise(swipe_count = sum(fare_swipe)/1e6) %>%
arrange(desc(swipe_count)) %>% head(20)
df %>%
filter(year != 2017 & year != 2010) %>%
group_by(fare_type) %>%
dplyr::summarise(swipe_count = sum(fare_swipe)/1e6) %>%
arrange(desc(swipe_count)) %>% head(20)
df %>%
filter(year != 2017 & year != 2010) %>%
group_by(year, fare_type) %>%
dplyr::summarise(swipe_count_year = sum(fare_swipe)) %>%
group_by(fare_type) %>%
summarise(swipe_count_year = sum(swipe_count)) %>%
arrange(desc(swipe_count)) %>% head(20)
df %>%
filter(year != 2017 & year != 2010) %>%
group_by(year, fare_type) %>%
dplyr::summarise(swipe_count_year = sum(fare_swipe)) %>%
group_by(fare_type) %>%
summarise(swipe_count_year = sum(swipe_count_year)) %>%
arrange(desc(swipe_count)) %>% head(20)
df %>%
filter(year != 2017 & year != 2010) %>%
group_by(year, fare_type) %>%
dplyr::summarise(swipe_count_year = sum(fare_swipe))
df %>%
filter(year != 2017 & year != 2010) %>%
group_by(year, fare_type) %>%
dplyr::summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count))
df3 %>% group_by(fare_type) %>%
dplyr::summarise(swipe_count_tt = sum(swipe_count)) %>%
arrange(desc(swipe_count_tt))
df3 = df %>%
filter(year != 2017 & year != 2010) %>%
group_by(year, fare_type) %>%
dplyr::summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count))
df3 %>% group_by(fare_type) %>%
dplyr::summarise(swipe_count_tt = sum(swipe_count)) %>%
arrange(desc(swipe_count_tt))
class(df3$swipe_count)
df3$swipe_count = as.numeric(df3$swipe_count)
df3 %>% group_by(fare_type) %>%
dplyr::summarise(swipe_count_tt = sum(swipe_count)) %>%
arrange(desc(swipe_count_tt))
df$fare_swipe = as.numeric(df$fare_swipe)
df %>% filter(year != 2017 & year != 2010) %>%
group_by(fare_type) %>%
dplyr::summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count)) %>% head(10)
getwd()
setwd("~/GitHub/MTA")
head(df)
df %>% filter(year != 2017 & year != 2010) %>%
group_by(fare_type) %>%
dplyr::summarise(swipe_count = sum(fare_swipe)) %>%
arrange(desc(swipe_count))
load('mta2010_gathered.Rda')
df1$fare_type
df1$fare_swipe = as.numeric(df1$fare_swipe)
save(df1, file='mta2010_gathered.Rda')
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
df$fare_type
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
shiny::runApp()
install.packages("DT")
runApp()
install.packages("dygraphs")
runApp()
install.packages("shinydashboard")
setwd("~/Documents/GitHub/MTA")
install.packages("googleVis")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
